{% extends "layout.jinja2" %}

{% macro show_comment(comment) %}
<li class="comment">
  {{ f.user_avatar(comment.poster) }}
  <article class="comment-box">
    <header class="comment-info">
      {{ f.user_link(comment.poster) }} {{ f.datetime(comment.unixtime) }}
    </header>
    <section class="comment-content formatted">
      {{ comment.content | markdown }}
    </section>
    <ul class="comment-actions action-set">
      <li><a href="#" class="action small">Reply</a></li>
      <li><a href="#" class="icon icon-action-warning">Report</a></li>
    </ul>
  </article>
  <ol>
    {% for subc in comment.subcomments %}{{ show_comment(subc) }}{% endfor %}
  </ol>
</li><!-- .comment -->
{% endmacro %}

{% block title %}{{ submission.title }}{% endblock %}
{% block body %}
<div class="sub-container">

  <header class="title-wrap">
    <h1 class="title primary">{{ submission.title }}</h1>
    <h2 class="title-complement">{{ f.by_user(submission.owner) }}</h2>
  </header>

  <a class="sub-zoom-toggle" href="{{ submission.submission_media['display_url'] }}">
    <img class="sub-image" src="{{ submission.cover_media['display_url'] }}" alt="sub image" />
  </a>

  <ul class="action-set sub-actions">
    <li><a href="#" class="action"><span class="icon icon-action-star"></span> Favorite</a></li>
    <li><a href="#" class="action"><span class="icon icon-action-heart"></span> Recommend</a></li>
    <li><a href="#" class="action"><span class="icon icon-action-warning"></span> Report</a></li>
  </ul>

</div><!-- .sub-container -->


<div class="content content-group">

  <div class="sub-basic lighter group">
    <div class="sub-owner">
      {{ f.user_avatar(submission.owner) }}
      <div class="info">
        {{ f.user_link(submission.owner) }} {{ f.datetime(submission.unixtime) }}
      </div>
    </div><!-- .sub-owner -->
    <div class="formatted sub-description">
      {{ submission.content | markdown }}
    </div><!-- .sub-description -->
    <div class="sub-tags">
      {% for tag in submission.tags | sort -%}
      <a href="#" class="tag">{{ tag }}</a>
      {%- endfor %}
      <a href="#" class="action disclose small">Modify</a>
    </div><!-- .sub-tags -->
  </div><!-- .sub-basic -->

  <div class="sub-stats">
    <h4 class="title secondary toggle disclose title-toggle-max-m max-m" data-toggle-target="next">Stats</h4>
    <!-- would love to use a dl here, but order is wrong and multiple columns is a drag -->
    <ul class="stats-list grid toggle-target-max-m">
      <li class="grid-item"><strong class="stat">{{ submission.page_views }}</strong> Views</li>
      <li class="grid-item"><strong class="stat">13</strong> Comments</li>
      <li class="grid-item"><strong class="stat">25</strong> Favorites</li>
      <li class="grid-item"><strong class="stat">{{ submission.rating.title() }}</strong> Rating</li>
      <li class="grid-item"><strong class="stat">712 KiB</strong> Size</li>
      <li class="grid-item"><strong class="stat">Photography</strong> Category</li>
      <!-- <li class="grid-item"><strong class="stat">SONY</strong> Manufacturer</li>
           <li class="grid-item"><strong class="stat">NEX-6</strong> Model</li>
      <li class="grid-item"><strong class="stat">JPEG</strong> Compression</li>
      <li class="grid-item"><strong class="stat">1/100 sec</strong> Exposure time</li>
      <li class="grid-item"><strong class="stat">f/2.8</strong> Aperture</li>
      <li class="grid-item"><strong class="stat">35mm</strong> Focal length</li> -->
    </ul>
  </div><!-- .sub-stats -->

  <section class="sub-comments">
    <h4 class="title secondary toggle disclose title-toggle max-m" data-toggle-target="next">13 comments</h4>
    <div class="toggle-target-max-m">
      {% if request.session.user %}
      <form action="#" class="comment" method="post">
        {{ f.user_avatar(request.session.user) }}
        <div class="comment-box hypothetical">
          <div class="comment-info">{{ f.user_link(request.session.user) }}</div>
          <textarea name="comment" id="comment-98avdja" class="comment-entry" placeholder="Share your thoughts &#8230;"></textarea>
          <ul class="comment-actions action-set">
            <li><a href="#" class="action small">Formatting help</a></li>
          </ul>
          <button type="submit" class="comment-submit action disclose">Save</button>
        </div><!-- .comment-box -->
      </form><!-- .comment -->
      {% endif %}

      <ol class="comment-tree">
        {% for comment in submission.comment_tree() %}{{ show_comment(comment) }}{% endfor %}
      </ol>
    </div><!-- .toggle-target-s -->

  </section><!-- .sub-comments -->

  <div class="sub-related">
    <h4 class="title secondary toggle disclose title-toggle-max-m" data-toggle-target="next">More in &#8220;Landscapes&#8221;</h4>
    <div class="toggle-target-max-m">
      <div class="title-wrap"><h5 class="title tertiary">Older</h5></div>
      <div class="grid thumbs-grid full">
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/221" alt="" />
              <div class="rating explicit">Rated explicit</div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/276" alt="" />
              <div class="rating explicit">Rated explicit</div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/259" alt="" />
              <div class="type"><div class="ribbon"><span class="icon icon-type-music">Music</span></div></div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/109" alt="" />
              <div class="rating mature">Rated mature</div>
              <div class="type"><div class="ribbon"><span class="icon icon-type-multi">Multimedia</span></div></div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/226" alt="" />
            </div>
        </a></div>
      </div><!-- .thumbs-grid -->

      <div class="title-wrap"><h5 class="title tertiary">Newer</h5></div>
      <div class="grid thumbs-grid full">
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/221" alt="" />
              <div class="rating explicit">Rated explicit</div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/276" alt="" />
              <div class="rating explicit">Rated explicit</div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/259" alt="" />
              <div class="type"><div class="ribbon"><span class="icon icon-type-music">Music</span></div></div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/109" alt="" />
              <div class="rating mature">Rated mature</div>
              <div class="type"><div class="ribbon"><span class="icon icon-type-multi">Multimedia</span></div></div>
            </div>
        </a></div>
        <div class="grid-item"><a href="submission.htm" class="item-container">
            <div class="thumb-container">
              <img class="thumb" src="http://lorempixel.com/300/226" alt="" />
            </div>
        </a></div>
      </div><!-- .thumbs-grid -->
    </div>
  </div><!-- .sub-related -->

</div><!-- .content -->
{% endblock %}
